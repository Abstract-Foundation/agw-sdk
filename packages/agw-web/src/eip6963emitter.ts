import {
  type CustomPaymasterHandler,
  transformEIP1193Provider,
} from '@abstract-foundation/agw-client';
import { toPrivyWalletProvider } from '@privy-io/cross-app-connect';
import { type Chain, type EIP1193Provider, http, type Transport } from 'viem';

interface EIP6963ProviderInfo {
  uuid: string;
  name: string;
  icon: string;
  rdns: string;
}

interface EIP6963ProviderDetail {
  info: EIP6963ProviderInfo;
  provider: EIP1193Provider;
}

class EIP6963AnnounceProviderEvent extends CustomEvent<EIP6963ProviderDetail> {
  constructor(detail: EIP6963ProviderDetail) {
    super('eip6963:announceProvider', { detail });
  }
}

const eip6963info: EIP6963ProviderInfo = {
  uuid: '2306fd26-fcfb-4f9e-87da-0d1e237e917c',
  name: 'Abstract Global Wallet',
  icon: 'data:image/png;base64,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',
  rdns: 'xyz.abs.privy',
};

export interface AnnounceProviderParameters {
  chain: Chain;
  transport?: Transport;
  customPaymasterHandler?: CustomPaymasterHandler;
}

export type AnnounceProviderReturnType = () => void;

export function announceProvider({
  chain,
  transport,
  customPaymasterHandler,
}: AnnounceProviderParameters): AnnounceProviderReturnType {
  if (typeof window === 'undefined') {
    return () => void 0;
  }

  const privyProvider = toPrivyWalletProvider({
    chainId: chain.id,
    providerAppId: 'cm04asygd041fmry9zmcyn5o5',
    chains: [chain],
    transports: {
      [chain.id]: transport ?? http(),
    },
  }) as EIP1193Provider;

  const abstractProvider = transformEIP1193Provider({
    provider: privyProvider,
    chain,
    transport: transport ?? http(),
    isPrivyCrossApp: true,
    customPaymasterHandler,
  });

  const event = new EIP6963AnnounceProviderEvent({
    info: eip6963info,
    provider: abstractProvider,
  });

  window.dispatchEvent(event);

  const handler = () => window.dispatchEvent(event);
  window.addEventListener('eip6963:requestProvider', handler);
  return () => window.removeEventListener('eip6963:requestProvider', handler);
}
